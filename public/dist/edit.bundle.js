(()=>{const e=document.querySelector(".task-edit-id"),t=document.querySelector(".task-edit-name"),a=document.querySelector(".task-edit-completed"),s=document.querySelector(".single-task-form"),c=document.querySelector(".task-edit-btn"),o=document.querySelector(".form-alert"),n=window.location.search,d=new URLSearchParams(n).get("id");let l;(async()=>{try{const{data:{data:{task:s}}}=await axios.get(`/api/v1/tasks/${d}`),{_id:c,completed:o,name:n}=s;e.textContent=c,t.value=n,l=n,o&&(a.checked=!0)}catch(e){console.log(e)}})(),s.addEventListener("submit",(async s=>{c.textContent="Loading...",s.preventDefault();try{const s=t.value,c=a.checked,{data:{data:{task:n}}}=await axios.patch(`/api/v1/tasks/${d}`,{name:s,completed:c}),{_id:r,completed:i,name:u}=n;e.textContent=r,t.value=u,l=u,i&&(a.checked=!0),o.style.display="block",o.textContent="success, edited task",o.classList.add("text-success")}catch(e){console.error(e),t.value=l,o.style.display="block",o.innerHTML="error, please try again"}c.textContent="Edit",setTimeout((()=>{o.style.display="none",o.classList.remove("text-success")}),3e3)}))})();